(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{507:function(t,n,a){"use strict";a.r(n);var e=a(4),s=Object(e.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前期准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前期准备"}},[t._v("#")]),t._v(" 前期准备")]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[t._v("💰 当然是用来买服务器啊")]),t._v(" "),a("li",[t._v("Termius ✅  「MacOS软件-用于连接到服务器」")]),t._v(" "),a("li",[t._v("Navicat Premium ✅ 「全平台软件-用于连接数据库」")]),t._v(" "),a("li",[t._v("Visual Studio Code ✅ 「全平台软件-yyds」")]),t._v(" "),a("li",[t._v("完成的前端项目「vue」")]),t._v(" "),a("li",[t._v("完成的后端项目「JFinal」")])]),t._v(" "),a("h2",{attrs:{id:"购买服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#购买服务器"}},[t._v("#")]),t._v(" 购买服务器")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("这是我购买的第三台云服务器了，有了前两次的摸爬滚打，这次总算顺利不少"),a("br"),t._v("\n服务器选的阿里云的学生机，比腾讯的便宜不知道多少，一年才96 💰，一共优惠了1644 💰！\n配置选的是「Ubuntu 18.04-1核2G」的版本\n"),a("img",{attrs:{src:"http://tva1.sinaimg.cn/large/007e6d0Xgy1go9mz4rco0j31tm0riwxr.jpg",alt:"image.png"}})]),t._v(" "),a("h2",{attrs:{id:"配置服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置服务器"}},[t._v("#")]),t._v(" 配置服务器")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("服务器整到手后先配置远程连接的密码，然后用「Termius」连上服务器，开始进行配置\n安装nginx反代工具")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sudo apt-get install nginx  # 安装nginx\n")])])]),a("p",[t._v("nginx的基本操作")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/etc/init.d/nginx start #启动\n/etc/init.d/nginx reload #重启\n/etc/init.d/nginx stop #停止\n\nsudo service nginx start    # 启动\nsudo service nginx reload   # 重载\nsudo service nginx restart  # 重启\nsudo service nginx stop     # 停止\n\nsudo /usr/local/nginx/sbin/nginx -v  # 查看版本\nsudo /usr/local/nginx/sbin/nginx     # 启动\nsudo /usr/local/nginx/sbin/nginx -s stop   # 停止\nsudo /usr/local/nginx/sbin/nginx -s reload # 重启\n")])])]),a("p",[t._v("由于这次配置的是基于vue的单页面应用，所以要对nginx进行配置修改"),a("br"),t._v("\n在本地新建一个 eta_vue.conf 文件，写入以下内容")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("server {\n    #服务启动时监听的端口\n    listen 80 default_server;\n    listen [::]:80 default_server;\n    #服务启动时文件加载的路径\n    root /var/www/html/eta_vue;\n    #默认加载的第一个文件\n    index index.php index.html index.htm index.nginx-debian.html;\n    #页面访问域名，如果没有域名也可以填写_\n    server_name www.632891553.xyz;\n\n    location / {\n        #页面加载失败后所跳转的页面\n        try_files $uri /index.html;\n    }\n    \n      \n    #以下配置只服务于php\n    # 将PHP脚本传递给在127.0.0.1:9000上监听的FastCGI服务器\n    location ~ \\.php$ {\n        include snippets/fastcgi-php.conf;\n        # With php7.0-cgi alone:\n        #fastcgi_pass 127.0.0.1:9000;\n        # With php7.0-fpm:\n        fastcgi_pass unix:/run/php/php7.0-fpm.sock;\n    }\n\n    # 如果Apache的文档为root，则拒绝访问.htaccess文件\n    location ~ /\\.ht {\n        deny all;\n    }\n}\n")])])]),a("p",[t._v("通过「Termius」的SFTP将上面的文件放入服务器的 "),a("code",[t._v("/etc/nginx/conf.d")]),t._v(" 路径下"),a("br"),t._v("\n并将 "),a("code",[t._v("/etc/nginx")]),t._v(" 下的 nginx.conf 文件中最后一行的默认配置注释掉（如下图）"),a("br"),t._v(" "),a("img",{attrs:{src:"http://tva1.sinaimg.cn/large/007e6d0Xgy1go9nkqhvm4j308y02dt8l.jpg",alt:"image.png"}}),a("br"),t._v("\n修改完成后重启一次nginx"),a("br"),t._v("\n将打包好的前端项目放入 "),a("code",[t._v("/var/www/html/eta_vue")]),t._v(" 文件夹下"),a("br"),t._v("\n进入浏览器，地址栏输入服务器ip，能看到前端页面就算配置好了")]),t._v(" "),a("h2",{attrs:{id:"安装数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装数据库"}},[t._v("#")]),t._v(" 安装数据库")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("数据库安装很方便只，需要以下几条命令")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sudo apt-get install mysql-server\n\napt-get install mysql-client\n\nsudo apt-get install libmysqlclient-dev\n")])])]),a("p",[t._v("安装好后用下面的命令来初始化安全设置")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mysql_secure_installation\n")])])]),a("p",[t._v("会询问是否执行以下几步操作，为了方便之后数据库管理，先选择开放远程登陆许可")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("为root用户设置密码")])]),t._v(" "),a("li",[a("p",[t._v("删除匿名账号「是」")])]),t._v(" "),a("li",[a("p",[t._v("取消root用户远程登录 「否」")])]),t._v(" "),a("li",[a("p",[t._v("删除test库和对test库的访问权限 「是」")])]),t._v(" "),a("li",[a("p",[t._v("刷新授权表使修改生效 「是」")])])]),t._v(" "),a("h2",{attrs:{id:"连接数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接数据库"}},[t._v("#")]),t._v(" 连接数据库")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("连接数据库前要先检查下3306端口是否可用\n"),a("a",{attrs:{href:"https://blog.csdn.net/freezingxu/article/details/77088506",target:"_blank",rel:"noopener noreferrer"}},[t._v("附上教程"),a("OutboundLink")],1),a("br"),t._v("\n教程中一些关于「vim」的操作可用参考我的另一篇指南 "),a("RouterLink",{attrs:{to:"/notes/Vim.html"}},[t._v("Vim 基础")]),a("br"),t._v("\n端口开启后千万要记得去阿里云控制台开启3306端口！！「我在这里浪费了将近2个小时🥲 」\n"),a("img",{attrs:{src:"http://tva1.sinaimg.cn/large/007e6d0Xgy1go9qs4ef8sj30ou0c9mxu.jpg",alt:"image.png"}})],1),t._v(" "),a("h2",{attrs:{id:"部署后端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署后端"}},[t._v("#")]),t._v(" 部署后端")]),t._v(" "),a("p",[t._v("首先利用 "),a("code",[t._v("apt-get")]),t._v(" 指令快速安装好 jdk1.8\n然后把打包好的后端项目上传至服务器 "),a("code",[t._v("/home/cxxy")]),t._v(" 目录下"),a("br"),t._v("\n解压文件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("tar -zxvf ETA6-release.tar.gz\n")])])]),a("p",[t._v("修改解压出来的文件里的数据库配置"),a("br"),t._v("\n启动项目")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" cd /home/cxxy/ETA6\n ./start.sh start\n")])])])])}),[],!1,null,null,null);n.default=s.exports}}]);